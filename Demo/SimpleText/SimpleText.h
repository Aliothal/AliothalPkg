#include <Library/ShellLib.h>
#include <Library/ShellCommandLib.h>
#include <Library/UefiLib.h>
#include <Library/UefiBootServicesTableLib.h>
#include <Library/UefiRuntimeServicesTableLib.h>
#include <Library/DebugLib.h>
#include <Library/MemoryAllocationLib.h>
#include <Library/BaseMemoryLib.h>
#include <Library/PrintLib.h>
#include <Library/DevicePathLib.h>

#include <Protocol/GraphicsOutput.h>
#include <Protocol/SimpleFileSystem.h>
#include <Protocol/UsbIo.h>
#include <Protocol/SimplePointer.h>

#define MOUSE_WEIGHT 16
#define MOUSE_HEIGHT 24

EFI_GRAPHICS_OUTPUT_BLT_PIXEL  gColors[16] = {
  //
  // B    G    R   reserved
  //
  { 0x00, 0x00, 0x00, 0x00 },  // 0x10 BLACK
  { 0x98, 0x00, 0x00, 0x00 },  // 0x41 LIGHTBLUE
  { 0x00, 0x98, 0x00, 0x00 },  // 0x42 LIGHGREEN
  { 0x98, 0x98, 0x00, 0x00 },  // 0x43 LIGHCYAN
  { 0x00, 0x00, 0x98, 0x00 },  // 0x44 LIGHRED
  { 0x98, 0x00, 0x98, 0x00 },  // 0x45 MAGENTA
  { 0x00, 0x98, 0x98, 0x00 },  // 0x46 BROWN
  { 0x98, 0x98, 0x98, 0x00 },  // 0x47 LIGHTGRAY
  { 0x30, 0x30, 0x30, 0x00 },  // 0x27 DARKGRAY - BRIGHT BLACK
  { 0xff, 0x00, 0x00, 0x00 },  // 0x81 BLUE
  { 0x00, 0xff, 0x00, 0x00 },  // 0x82 LIME
  { 0xff, 0xff, 0x00, 0x00 },  // 0x83 CYAN
  { 0x00, 0x00, 0xff, 0x00 },  // 0x84 RED
  { 0xff, 0x00, 0xff, 0x00 },  // 0x85 FUCHSIA
  { 0x00, 0xff, 0xff, 0x00 },  // 0x86 YELLOW
  { 0xff, 0xff, 0xff, 0x00 }   // 0x87 WHITE
};

// 0xff 0x98 0x30 0x00 r  R  G  B
UINT8 zColor[16] = {
  0x10,
  0x41,
  0x42,
  0x43,
  0x44,
  0x45,
  0x46,
  0x47,
  0x27,
  0x81,
  0x82,
  0x83,
  0x84,
  0x85,
  0x86,
  0x87
};

UINT8 zMouse[MOUSE_HEIGHT][MOUSE_WEIGHT] = {
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x27, 0x27, 0x27, 0x27, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x87, 0x10, 0x47, 0x87, 0x27, 0x47, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x87, 0x10, 0x47, 0x10, 0x87, 0x87, 0x27, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x87, 0x10, 0x47, 0x87, 0x27, 0x47, 0x87, 0x27, 0x47, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x10, 0x10, 0x47, 0x87, 0x87, 0x47, 0x10, 0x87, 0x47, 0x10, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x27, 0x47, 0x87, 0x10, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x10, 0x27, 0x47, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87},
  {0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87, 0x87}
};

EFI_GRAPHICS_OUTPUT_BLT_PIXEL *gMouseBlt = NULL;
EFI_GRAPHICS_OUTPUT_PROTOCOL *Gop = NULL;